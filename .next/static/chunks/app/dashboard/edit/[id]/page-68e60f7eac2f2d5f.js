(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{1154:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return l}});let a=r(8229),i=r(8883),s=r(3063),n=a._(r(1193));function l(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=s.Image},1748:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155),i=r(2115),s=r(3168),n=r(1154);let l=(0,r(9946).A)("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);function o(e){let{onUpload:t}=e,[r,o]=(0,i.useState)(!1),u=(0,s.UU)(),d=async e=>{var r;let a=null==(r=e.target.files)?void 0:r[0];if(!a)return;o(!0);let i=a.name.split(".").pop(),s="".concat(Date.now(),".").concat(i),n="".concat(s),{error:l}=await u.storage.from("product").upload(n,a);if(l){alert("Erreur upload : "+l.message),o(!1);return}let{data:d}=u.storage.from("product").getPublicUrl(n);t(d.publicUrl),o(!1)};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("label",{htmlFor:"upload-image",className:"group cursor-pointer flex items-center justify-center w-full h-44 rounded-xl border-2 border-dashed border-[#DAD5CD] bg-[#F9F6F1] hover:bg-[#f0ece6] transition relative",children:r?(0,a.jsx)(n.A,{className:"animate-spin w-6 h-6 text-[#D29587]"}):(0,a.jsxs)("div",{className:"flex flex-col items-center text-[#A6A6A6] group-hover:text-[#D29587] transition",children:[(0,a.jsx)(l,{className:"w-6 h-6 mb-2"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"T\xe9l\xe9verser une image"}),(0,a.jsx)("span",{className:"text-xs",children:"PNG, JPG jusqu'\xe0 5 Mo"})]})}),(0,a.jsx)("input",{id:"upload-image",type:"file",accept:"image/*",onChange:d,disabled:r,className:"hidden"})]})}},1850:(e,t,r)=>{Promise.resolve().then(r.bind(r,8272))},3168:(e,t,r)=>{"use strict";r.d(t,{UU:()=>i});var a=r(1935);let i=()=>(0,a.createBrowserClient)("https://bdeahexcoljgxdpbxvve.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJkZWFoZXhjb2xqZ3hkcGJ4dnZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg1MjI3OTksImV4cCI6MjA2NDA5ODc5OX0.1gDZZQnDCDAXx7vWM0rVWPB3XGc9MTY-OsnmR9TgD54")},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),i=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,a.$)(t))}},5817:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>u});var a=r(5155);r(2115);var i=r(9708),s=r(2596);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=s.$;var o=r(3999);let u=((e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:s}=t,o=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],a=null==s?void 0:s[e];if(null===t)return null;let l=n(t)||n(a);return i[e][l]}),u=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return l(e,o,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...s,...u}[t]):({...s,...u})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)})("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:s,asChild:n=!1,...l}=e,d=n?i.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,o.cn)(u({variant:r,size:s,className:t})),...l})}},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var a=r(1469),i=r.n(a)},8272:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(5155),i=r(2115),s=r(5695),n=r(3168),l=r(6766),o=r(1748),u=r(5817);let d=[{label:"V\xeatements",value:"vetement"},{label:"Soins et astuces",value:"soins-et-astuces"},{label:"Maquillage",value:"maquillage"},{label:"Artisanat (fait main)",value:"artisanat"}];function c(e){let{product:t}=e,[r,c]=(0,i.useState)(t.title),[p,m]=(0,i.useState)(t.price.toString()),[g,h]=(0,i.useState)(t.description),[v,f]=(0,i.useState)(t.image_url),[x,b]=(0,i.useState)(t.whatsapp_number||""),[y,w]=(0,i.useState)(t.category||d[0].value),[j,N]=(0,i.useState)(!1),[D,A]=(0,i.useState)(""),k=(0,s.useRouter)(),C=(0,n.UU)(),I=async e=>{if(e.preventDefault(),A(""),!r.trim())return A("Le titre est requis.");if(!p||isNaN(Number(p))||0>=Number(p))return A("Prix invalide.");if(!g.trim())return A("La description est requise.");if(!x.match(/^\+?\d{7,15}$/))return A("Num\xe9ro WhatsApp invalide.");if(!y)return A("Veuillez choisir une cat\xe9gorie.");N(!0);let{error:a}=await C.from("product").update({title:r.trim(),price:parseFloat(p),description:g.trim(),image_url:v,whatsapp_number:x,category:y}).eq("id",t.id);N(!1),a?A(a.message):k.push("/dashboard/products")};return(0,a.jsxs)("div",{children:[(0,a.jsx)(u.$,{variant:"outline",size:"lg",onClick:()=>k.back(),className:"mb-10 hover:bg-[#D29587] font-bold border-[#D29587]",children:"Retour"}),(0,a.jsxs)("form",{onSubmit:I,className:"max-w-xl mx-auto space-y-6 bg-white shadow-lg rounded-2xl p-8 border border-[#E6E3DF] animate-fade-in",children:[D&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:D}),(0,a.jsxs)("div",{className:"w-full flex flex-col items-center gap-4",children:[(0,a.jsx)(o.A,{onUpload:f}),v&&(0,a.jsx)(l.default,{src:v,alt:"Aper\xe7u",width:300,height:300,className:"rounded-xl object-cover border border-[#E6E3DF]"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Titre du produit",value:r,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-[#DAD5CD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D29587] transition",required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Prix (en FCFA)",value:p,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-[#DAD5CD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D29587] transition",required:!0,min:0,step:"0.01"}),(0,a.jsx)("textarea",{placeholder:"Description d\xe9taill\xe9e...",value:g,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border border-[#DAD5CD] rounded-xl h-32 resize-none focus:outline-none focus:ring-2 focus:ring-[#D29587] transition",required:!0}),(0,a.jsx)("input",{type:"tel",placeholder:"Num\xe9ro WhatsApp (+221...)",value:x,onChange:e=>b(e.target.value),className:"w-full px-4 py-3 border border-[#DAD5CD] rounded-xl focus:outline-none focus:ring-2 focus:ring-[#D29587] transition",pattern:"^\\+?\\d{7,15}$",title:"Entrez un num\xe9ro WhatsApp valide, avec indicatif pays",required:!0}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{htmlFor:"category",className:"absolute left-4 top-3 text-sm text-[#A6A6A6] transition-all duration-200 ".concat(y?"text-xs -top-2 bg-white px-1 text-[#D29587]":""),children:"Cat\xe9gorie"}),(0,a.jsx)("select",{id:"category",value:y,onChange:e=>w(e.target.value),className:"w-full appearance-none px-4 pt-6 pb-3 border border-[#DAD5CD] rounded-xl bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-[#D29587] transition",required:!0,children:d.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-4 flex items-center text-gray-400",children:(0,a.jsx)("svg",{className:"h-5 w-5 transform transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),(0,a.jsx)("button",{type:"submit",disabled:j,className:"w-full bg-[#D29587] text-white font-semibold py-3 rounded-xl hover:bg-[#bb7d72] transition",children:j?"Modification en cours...":"Modifier le produit"}),(0,a.jsx)("p",{className:"text-center text-xs text-[#A6A6A6] italic mt-4",children:"Mise \xe0 jour r\xe9ussie, inchallah \uD83D\uDE4C"})]})]})}},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:p,...m}=e;return(0,a.createElement)("svg",{ref:t,...u,width:i,height:i,stroke:r,strokeWidth:n?24*Number(s)/Number(i):s,className:l("lucide",d),...!c&&!o(m)&&{"aria-hidden":"true"},...m},[...p.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:o,...u}=r;return(0,a.createElement)(d,{ref:s,iconNode:t,className:l("lucide-".concat(i(n(e))),"lucide-".concat(e),o),...u})});return r.displayName=n(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[848,150,63,441,684,358],()=>t(1850)),_N_E=e.O()}]);